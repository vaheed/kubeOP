# -----------------------------------------------------------------------------
# kubeOP environment defaults (.env.example)
# Copy this file to `.env` and adjust values for your deployment.
# -----------------------------------------------------------------------------

# -----------------------------------------------------------------------------
# Database configuration
# -----------------------------------------------------------------------------
# PostgreSQL connection string used by the manager API and integration tests.
# Format: postgres://USER:PASS@HOST:PORT/DB?sslmode=disable
# Local default leverages the bundled postgres service from docker-compose.
KUBEOP_DB_URL=postgres://kubeop:kubeop@localhost:5432/kubeop?sslmode=disable

# -----------------------------------------------------------------------------
# Authentication & encryption
# -----------------------------------------------------------------------------
# Require JWT authentication on every API request. Set to `true` for production.
KUBEOP_REQUIRE_AUTH=true

# Base64-encoded HS256 signing key used to validate incoming API tokens.
# Generate a 32-byte key: `openssl rand -base64 32`
KUBEOP_JWT_SIGNING_KEY=replace-with-base64-jwt-key

# Base64-encoded 32-byte envelope encryption key for secrets at rest.
# Generate: `openssl rand -base64 32`
KUBEOP_KMS_MASTER_KEY=replace-with-base64-kms-key

# Listen address for the manager API HTTP server (default `:8080`).
KUBEOP_HTTP_ADDR=:8080

# -----------------------------------------------------------------------------
# Image policy safeguards enforced by the admission service
# -----------------------------------------------------------------------------
# Comma-separated list of registry hosts allowed in App specifications.
# Example: ghcr.io,docker.io,quay.io
KUBEOP_IMAGE_ALLOWLIST=ghcr.io,docker.io

# Comma-separated list of CIDRs automatically included in tenant egress policies.
# Use `0.0.0.0/0` only for permissive lab environments.
KUBEOP_EGRESS_BASELINE=0.0.0.0/0

# -----------------------------------------------------------------------------
# Operator bootstrap overrides consumed by the manager
# -----------------------------------------------------------------------------
# Override the image (including tag) used when bootstrapping the kubeOP operator.
# Defaults to the release image published to GHCR.
KUBEOP_OPERATOR_IMAGE=ghcr.io/vaheed/kubeop/operator:latest

# Override the pull policy applied to the operator Deployment during bootstrap.
# Valid options: Always, IfNotPresent, Never
KUBEOP_OPERATOR_IMAGE_PULL_POLICY=Always

# -----------------------------------------------------------------------------
# Observability & diagnostics
# -----------------------------------------------------------------------------
# Enable verbose logging (debug|info|warn). Leave unset to use the binary default.
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Billing rates (per-hour unit costs)
# -----------------------------------------------------------------------------
# Optional rates used by invoice aggregation; defaults are minimal if unset.
# Cost per CPU milli-hour and per MiB-hour.
KUBEOP_RATE_CPU_MILLI=0.000001
KUBEOP_RATE_MEM_MIB=0.0000002
